From 9f30a27617915ee8c59aa43d9165d938129796b3 Mon Sep 17 00:00:00 2001
From: Zhiyu Hu <huzhiyu1@huawei.com>
Date: Fri, 28 Dec 2018 07:06:38 +0000
Subject: [PATCH 08/23] fix rodata.str problem

fix some rodata.str problem

Signed-off-by: Zhiyu Hu <huzhiyu1@huawei.com>
---
 kpatch-build/create-diff-object.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kpatch-build/create-diff-object.c b/kpatch-build/create-diff-object.c
index 8ce3b59..f37d404 100644
--- a/kpatch-build/create-diff-object.c
+++ b/kpatch-build/create-diff-object.c
@@ -1634,7 +1634,7 @@ static void kpatch_include_standard_elements(struct kpatch_elf *kelf)
 		    !strcmp(sec->name, ".toc") ||
 		    !strcmp(sec->name, ".rodata") ||
 		    (!strncmp(sec->name, ".rodata.", 8) &&
-		     strstr(sec->name, ".str1."))) {
+		     strstr(sec->name, ".str"))) {
 			kpatch_include_section(sec);
 		}
 	}
-- 
2.18.1

