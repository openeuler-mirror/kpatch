From e8a1f76c0409720106df90e6358d2b00c496b74d Mon Sep 17 00:00:00 2001
From: hubin <hubin73@huawei.com>
Date: Tue, 10 May 2022 15:26:25 +0800
Subject: [PATCH 1/9] livepatch-patch-hook: disable HAVE_SIMPLE_ENABLE to keep
 register and unregister step of hotpatch

Signed-off-by: Bin Hu <hubin73@huawei.com>
---
 kmod/patch/livepatch-patch-hook.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/kmod/patch/livepatch-patch-hook.c b/kmod/patch/livepatch-patch-hook.c
index 9e56fe3..339b00f 100644
--- a/kmod/patch/livepatch-patch-hook.c
+++ b/kmod/patch/livepatch-patch-hook.c
@@ -78,8 +78,6 @@
 # if RHEL_RELEASE_CODE >= RHEL_RELEASE_VERSION(8, 2)
 #  define HAVE_KLP_REPLACE
 # endif
-#elif LINUX_VERSION_CODE >= KERNEL_VERSION(5, 1, 0)
-# define HAVE_KLP_REPLACE
 #endif
 
 #ifndef KLP_REPLACE_ENABLE
-- 
2.31.0.windows.1

